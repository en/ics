# 3：IBC设计原则

**这是对IBC“设计原则”的解释。**

**有关IBC规范中使用的术语的定义，请参见[此处](./1_IBC_TERMINOLOGY.md) 。**

**有关架构的概述，请参见[此处](./2_IBC_ARCHITECTURE.md) 。**

**有关一组示例用例，请参见[此处](./4_IBC_USECASES.md) 。**

**有关设计模式的讨论，请参见[此处](./5_IBC_DESIGN_PATTERNS.md) 。**

“区块链间通信协议”的设计空间很广，这个术语本身变得太包罗万象了。 “区块链间通信协议”（IBC）是该设计空间中的一个非常特殊的点，它被选择为预期的可互操作区块链的链间生态系统提供特定的多功能性，局部性，模块化和效率属性。本文档概述了IBC的“原因”，并列举了主要的高级设计目标。

## 多样性

IBC被设计为*多样性*协议。该协议支持*异构*区块链，其状态机用不同的语言实现了不同的语义。可以将在IBC之上编写的应用程序*组合*在一起，并且使用IBC协议进行*自动化* 。

### 异构性

IBC可以通过任何满足基本需求集的共识算法和状态机来实现（快速最终性，常量大小的状态加密承诺和简洁的加密承诺证明）。该协议处理数据身份验证，传输和排序（任何多链应用程序的常见要求），但与应用程序本身的语义无关。通过IBC连接的异构链必须了解兼容的应用程序层“接口”（例如，用于转移通证），但是一旦通过IBC接口处理程序，状态机就可以支持任意定制的功能（例如，受保护的交易）。

### 可组合性

协议开发人员和用户都可以将在IBC之上编写的应用程序组合在一起。 IBC定义了一组用于身份验证，传输和排序的原语，以及一组用于资产和数据语义的应用层标准。支持兼容标准的链可以连接在一起并和任何打开连接（或重用连接）的用户进行交互，资产和数据可以跨多个链自动（“多跳”）和手动（通过依次发送几个IBC中继交易）中继。

### 自动化性

IBC中的“用户”或“参与者”（可以启动连接，创建通道，发送数据包，报告拜占庭欺诈等）可以是但不是必须是人类，模块，智能合约和自动化的链下进程可以利用该协议（例如，要支付用于计算的gas费用成本），并可以自行采取行动或协同行动。设计跨多个链的复杂交互（例如三步连接打开握手或多跳通证转移），使得除了单个启动动作之外的所有动作都可以从用户那里抽象出来。最终，可能有可能自动启动一个新的区块链（抛开配置物理基础架构），启动IBC连接，并完全自动使用新链的状态机和吞吐量。

## 模块化

IBC被设计为*模块化*协议。该协议被构造为一系列具有明确安全属性和要求的分层组件。特定层上组件的实现可以有所不同（例如不同的共识算法或连接打开过程），只要它们为更高层提供必要的属性（例如最终性，<1/3拜占庭安全性或嵌入式受信任状态在两个链上）。状态机仅需要了解IBC协议的兼容子集（例如，用于彼此共识的轻客户端验证算法）即可安全地进行交互。

## 局部性

IBC被设计为*局部*协议，这意味着仅两个连接链的信息关系着双向IBC连接的安全性和正确性。身份验证原语的安全性要求仅涉及连接中的区块链的共识算法和验证人集合，并且维护一组IBC连接的区块链仅需要了解其所连接的链的状态（无论这些链又连接到哪个链）。

### 通讯和信息的局部性

IBC对其运行所在的区块链网络的拓扑结构不做任何假设，也不依赖任何特征。无需查看全局的区块链网络拓扑：可以在两条链之间的单个连接级别上推理安全性和正确性，并可以通过对网络拓扑中的子图进行推理来推理安全性和正确性。给定用户仅知道和假定正确的区块链网络图的一部分信息（可变程度），用户和链就可以推断其假设和风险。

IBC中没有必需的“根链”-全球网络的某些子图可能会演变成中心辐射状结构，其他子图可能保持紧密连接，其他子图可能仍采用更奇特的拓扑。通道是端到端的；在第一个版本中，IBC仅支持单跳路径，但将来将支持多跳路径（尽管由于涉及共识算法正确性假设，因此自动路由不一定可能或安全）。

但是，应用程序数据可能具有协议用户需要注意的显著的非局部属性，例如通证的原始来源区域（可能已在复杂的多跳路径上发送了多次），原始权益和通过跨链验证提供其服务的验证人的身份，或与管理非同质化通证的特定对象功能密钥相关联的原始智能合约。这些非局部属性不需要由IBC协议本身理解，但需要由用户和更高级别的应用程序来推断。

### 正确性假设和安全性的局部性

IBC的用户（在区块链级别以及在人类或智能合约级别上）选择哪些共识算法，状态机和验证人集合为“假定正确”（以特定方式运行，例如<1/3拜占庭）并以哪种方式假设正确性。假设IBC协议正确实施，则用户永远不会因拜占庭行为或验证人集合或未明确决定假定为验证人的区块链提交的错误状态机转换而遭受应用级不变违规（例如资产通涨）的风险。这在互连的区块链的预期大型网络拓扑中尤为重要，在这种拓扑中，一些区块链和验证人集合有时可能会有意的进行拜占庭行为— IBC保守的实施，限制了风险并限制了可能造成的损害。

### 许可的局部性

涉及两条链之间特定连接的状态机和参与者在本地许可IBC中的操作（例如打开连接，创建通道或发送数据包）。各个链可以选择要求特定应用程序层操作（例如，委托安全性惩罚）的许可机制（例如，治理）的批准，但是对于基本协议，操作是无许可的（抛开gas费用和存储成本）-默认情况下，无需任何批准即可打开连接，创建通道和发送数据包。当然，用户自己必须检查每个IBC连接的状态和共识，并决定使用它是否安全（例如，基于存储的受信任状态）。

## 高效性

IBC被设计为一种*高效的*协议：链间数据和资产中继的平摊成本应主要包括基础状态转换或与数据包相关的操作（例如，转移通证）的成本，以及一些较小的固定开销。
